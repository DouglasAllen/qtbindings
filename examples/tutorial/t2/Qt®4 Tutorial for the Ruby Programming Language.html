<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0063)https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_02 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head profile="http://www.w3.org/2005/10/profile"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Qt®4 Tutorial for the Ruby Programming Language</title>

<link rel="stylesheet" href="./Qt®4 Tutorial for the Ruby Programming Language_files/default.css" type="text/css">
<link rel="icon" type="image/png" href="https://www.darshancomputing.com/favicon.png">
<!-- google_ad_section_start(weight=ignore) -->
<link rel="start" href="https://www.darshancomputing.com/qt4-qtruby-tutorial/">
<link rel="next" href="https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_03">
<link rel="prev" href="https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_01">
<!-- google_ad_section_end -->
</head>
<body>
<div class="page">
<!-- google_ad_section_start(weight=ignore) -->
<div class="navPrev">&nbsp;[Prev: <a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_01">Chapter 1</a>]</div>
<div class="navContents">&nbsp;[<a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/">Contents</a>]&nbsp;</div>
<div class="navNext">[Next: <a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_03">Chapter 3</a>]&nbsp;</div>
<!-- google_ad_section_end -->
<div class="content">
<h1 class="title">Qt<sup>®</sup>4 Tutorial for the Ruby <br>Programming Language</h1>
<!-- google_ad_section_start(weight=ignore) --><h2 class="subtitle">Chapter 2: Calling it Quits</h2><!-- google_ad_section_end -->
<div class="center"><img src="./Qt®4 Tutorial for the Ruby Programming Language_files/t2.png" alt="Screenshot: Calling it Quits" width="83" height="62"></div>
<br>
Files:
<ul>
<li><a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/tutorial/t2/t2.rb">t2.rb</a></li>
</ul>
<h3>Overview</h3>

<p>
Having created a window in Chapter 1, we will now go on to make the application quit properly when the user tells it to.
</p>

<p>
We will also use a font that is more exciting than the default one.
</p>

<pre class="code">require 'Qt4'

app = Qt::Application.new(ARGV)

quit = Qt::PushButton.new('Quit')
quit.resize(75, 30)
quit.setFont(Qt::Font.new('Times', 18, Qt::Font::Bold))

Qt::Object.connect(quit, SIGNAL('clicked()'), app, SLOT('quit()'))

quit.show()
app.exec()
</pre>

<h3>Line by Line Walkthrough</h3>

<pre class="code">quit = Qt::PushButton.new('Quit')
</pre>

<p>
This time, the button says <b>Quit</b> and that's exactly what the program will do when the user clicks the button.
</p>

<pre class="code">quit.resize(75, 30)
</pre>

<p>
We've chosen another size for the button since the text is a bit shorter than "Hello world!". 
We could also have used <a href="http://doc.trolltech.com/4.2/qfontmetrics.html">Qt::FontMetrics</a> to set right size, or let <a href="http://doc.trolltech.com/4.2/qpushbutton.html">Qt::PushButton</a> choose a reasonable default.
</p>

<pre class="code">quit.setFont(Qt::Font.new('Times', 18, Qt::Font::Bold))
</pre>

<p>
Here we choose a new font for the button, an 18-point bold font from the Times family. 
It is also possible to change the default font for the entire application, using <a href="http://doc.trolltech.com/4.2/qapplication.html#setFont">Qt::Application::setFont()</a>.
</p>

<pre class="code">Qt::Object.connect(quit, SIGNAL('clicked()'), app, SLOT('quit()'))
</pre>

<p>
<a href="http://doc.trolltech.com/4.2/qobject.html#connect">Qt::Object::connect()</a> is perhaps <em>the</em> most central feature of Qt. 
Note that <code>connect()</code> in this context is a static function in <a href="http://doc.trolltech.com/4.2/qobject.html">Qt::Object</a>. 
Do not confuse it with the <code>connect()</code> function in the Berkeley socket library.
</p>

<p>
This <code>connect()</code> call establishes a one-way connection between two Qt objects 
(objects that inherit <a href="http://doc.trolltech.com/4.2/qobject.html">Qt::Object</a>, directly or indirectly). 
Every Qt object can have both <code>signals</code> (to send messages) and <code>slots</code> (to receive messages).
 All widgets are Qt objects, since they inherit <a href="http://doc.trolltech.com/4.2/qwidget.html">Qt::Widget</a>, which in turn inherits <a href="http://doc.trolltech.com/4.2/qobject.html">Qt::Object</a>.
</p>

<p>
Here, the <code>clicked()</code> signal of <code>quit</code> is connected to the <code>quit()</code> slot of <code>app</code>, 
so that when the button is clicked, the application quits.
</p>

<p>
The <a href="http://doc.trolltech.com/4.2/signalsandslots.html">Signals and Slots</a>
documentation describes this topic in detail.
</p>

<h3>Running the Application</h3>

<p>
When you run this program, you will see an even smaller window than in Chapter 1, filled with an even smaller button.
</p>

<!-- google_ad_section_start(weight=ignore) --><h3>Exercises</h3><!-- google_ad_section_end -->

<p>
Try to resize the window. Click the button to close the application.
</p>

<p>
Are there any other signals in <a href="http://doc.trolltech.com/4.2/qpushbutton.html">Qt::PushButton</a> you can connect to quit? 
[Hint: The <a href="http://doc.trolltech.com/4.2/qpushbutton.html">Qt::PushButton</a> inherits most of its functionality from <a href="http://doc.trolltech.com/4.2/qabstractbutton.html">Qt::AbstractButton</a>.]
</p>
</div>
<!-- google_ad_section_start(weight=ignore) -->
<div class="navPrev">&nbsp;[Prev: <a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_01">Chapter 1</a>]</div>
<div class="navContents">&nbsp;[<a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/">Contents</a>]&nbsp;</div>
<div class="navNext">[Next: <a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/chapter_03">Chapter 3</a>]&nbsp;</div>
<!-- google_ad_section_end -->
<!-- google_ad_section_start(weight=ignore) -->
<hr><div class="legal_link"><a href="https://www.darshancomputing.com/qt4-qtruby-tutorial/legal">Legal Notice</a>&nbsp;</div>
<div class="contact_link"><a href="mailto:qt-tutorial@darshancomputing.com">Contact Me</a></div>
<!-- google_ad_section_end -->
<div class="force_clear"></div>
</div>

<p style="clear: both">
</p><p style="margin-bottom: 0px;">
  <a href="http://validator.w3.org/check?uri=referer"><img src="./Qt®4 Tutorial for the Ruby Programming Language_files/valid-xhtml10.png" alt="Valid XHTML 1.0!" height="31" width="88"></a>
  <a href="http://jigsaw.w3.org/css-validator/check/referer"><img src="./Qt®4 Tutorial for the Ruby Programming Language_files/vcss.png" alt="Valid CSS!" height="31" width="88"></a>
</p>

<p style="margin-top: 10px; margin-bottom: 0px;">
This page was last generated Sun Dec 03 14:40:27 -0800 2006
</p>
<script type="text/javascript">/* <![CDATA[ */(function(d,s,a,i,j,r,l,m,t){try{l=d.getElementsByTagName('a');t=d.createElement('textarea');for(i=0;l.length-i;i++){try{a=l[i].href;s=a.indexOf('/cdn-cgi/l/email-protection');m=a.length;if(a&&s>-1&&m>28){j=28+s;s='';if(j<m){r='0x'+a.substr(j,2)|0;for(j+=2;j<m&&a.charAt(j)!='X';j+=2)s+='%'+('0'+('0x'+a.substr(j,2)^r).toString(16)).slice(-2);j++;s=decodeURIComponent(s)+a.substr(j,m-j)}t.innerHTML=s.replace(/</g,'&lt;').replace(/>/g,'&gt;');l[i].href='mailto:'+t.value}}catch(e){}}}catch(e){}})(document);/* ]]> */</script>

</body></html>